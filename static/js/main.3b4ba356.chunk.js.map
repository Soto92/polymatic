{"version":3,"sources":["lib/worker.js","pages/About.js","store.js","components/Layer.js","lib/clavis.js","components/Preview.js","instruments.js","presets.js","lib/pattern.js","lib/wa-metro.js","lib/layer.js","lib/beet.js","lib/channel.js","lib/clave.js","components/AlertModal.js","components/Toolbar.js","pages/Home.js","components/Header.js","lib/bufferLoader.js","App.js","serviceWorker.js","index.js","samples/agogo1.wav","samples/agogo2.wav","samples/bass.wav","samples/block.wav","samples/bum.wav","samples/claves.wav","samples/conga1.wav","samples/conga2.wav","samples/cymbal.wav","samples/djembe1.wav","samples/djembe3.wav","samples/djembe2.wav","samples/hit.wav","samples/hithat.wav","samples/kick1.wav","samples/kick2.wav","samples/kicklow.wav","samples/snare.wav","samples/tamborim.wav"],"names":["self","interval","timer","onmessage","event","data","setInterval","postMessage","clearInterval","Header","className","href","process","target","rel","initialState","previewPattern","previewVisibility","polymetric","claves","isPlaying","store","createContext","Provider","children","memoizedReducer","React","useCallback","state","action","type","pattern","visible","clave","filter","id","Error","useReducer","dispatch","value","Consumer","Layer","canvasRef","useRef","useState","volume","setVolume","sequence","tempo","clavis","channel","instrument","useContext","useEffect","configure","current","draw","start","shortid","generate","ref","width","height","ButtonGroup","aria-label","Button","onClick","icon","faPlay","stop","faStop","remove","faTrash","min","max","tooltipLabel","currentValue","onChange","e","newVolume","low1","high1","low2","high2","remap","handleVolume","Number","Clavis","this","canvas","context","animate","lastRender","Date","now","bind","currentStep","patternPos","getContext","step","window","requestAnimationFrame","theme","radius","angle","Math","PI","length","startAngle","drawDot","x","y","stroke","fill","strokeStyle","fillStyle","beginPath","arc","drawDotOn","drawDotOff","style","padding","clearRect","lineWidth","patternDots","coords","r","cos","sin","i","push","dots","moveTo","lineTo","closePath","connectDots","drawDotBeat","Preview","instruments","agogo1","agogo2","bass","block","bumbo","conga1","conga2","cymbal","djembe1","djembe2","djembe3","hit","hithat","kick1","kick2","kicklow","snare","tamborim","presets","name","sample","watch","WatchJS","Pattern","pulses","steps","_createSequence","update","prototype","shift","offset","off","seq","tail","splice","unshift","typeOfPulses","er","getPattern","split","Metro","callback","look_ahead","_step","_scheduler_interval","_next_event_time","_first","_is_running","_worker","work","_scheduler","console","log","pause","currentTime","event_time_from_scheduled","_next","on","metro","time","timeFromScheduled","setTimeout","setCurrentStep","Beet","layers","layer","item","forEach","path","success","failure","request","XMLHttpRequest","open","responseType","onload","decodeAudioData","response","onerror","send","Channel","callbackOn","gainNode","createGain","gain","connect","destination","source","createBufferSource","buffer","beet","Clave","baseTempo","beetLayer","firstSteps","newSteps","ratio","toFixed","add","play","AlertModal","props","Modal","size","aria-labelledby","centered","closeButton","Title","Body","Footer","variant","onHide","onConfirm","Toolbar","patternError","setPatternError","setSample","setTempo","modalShow","setModalShow","hasClaves","patternInput","show","disabled","faTimes","InputGroup","Prepend","Text","FormControl","placeholder","isEuclidian","RegExp","isBinary","test","map","number","parseInt","sort","a","b","pulse","newPattern","join","handlePattern","isInvalid","Form","Control","as","Object","keys","instrumentsList","index","key","Check","inline","label","checked","handleNewClave","Dropdown","Toggle","Menu","preset","Item","Home","Navbar","collapseOnSelect","bg","expand","Brand","to","packageJson","version","Nav","BufferLoader","bufferList","loadCount","alert","error","loadBuffer","AudioContext","webkitAudioContext","App","loadedSamples","setLoadedSamples","ReactGA","initialize","pageview","location","pathname","search","finishedLoading","load","basename","exact","About","render","routeProps","Boolean","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message","module","exports"],"mappings":"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","file":"static/js/main.3b4ba356.chunk.js","sourcesContent":["/**\n Original code\n Author: Ehsan Ziya <ehsan.ziya@gmail.com>\n source: https:github.com/zya/beet.js\n**/\n\nexport default function(self) {\n  var interval = 25;\n  var timer = null;\n  self.onmessage = function(event) {\n    if (event.data === \"interval\") {\n      interval = event.data.interval;\n    }\n    if (event.data === \"start\") {\n      timer = setInterval(function() {\n        postMessage(\"tick\");\n      }, interval);\n    }\n\n    if (event.data === \"stop\") {\n      clearInterval(timer);\n      timer = null;\n    }\n  };\n}\n","import React from \"react\";\n\nfunction Header() {\n  return (\n    <div className=\"about\">\n      <div className=\"col-8 offset-2\">\n        <h3>Polymatic!</h3>\n        <p>projeto idealizado por Gil Amancio e Guilherme Guerra</p>\n        <p>\n          O Polymatic é um aplicativo para fazer música ou dar aula de música a\n          partir de outros paradigmas que orientam a criação musical. Ele é\n          inspirado nos modos de produção da musical da África e da diáspora.\n          Não é um software para fazer música no computador, mas sim, fazer\n          música assistida por computador, ou seja, o computador é uma\n          ferramenta para instigar a criação e a execução musical coletiva.\n        </p>\n        <p>\n          O Polymatic é um aplicativo que gera padrões rítmicos mínimos. Esses\n          padrões têm vários nomes em diferentes lugares, clave em Cuba,\n          timeline nos Estados Unidos e Europa, e no Brasil resolvi chamá-los de\n          Guia.\n        </p>\n        <p>\n          A escolha nome Guia veio da associação, durante as pesquisas, dos\n          registros desses padrões rítmicos de forma circular, feito pelo músico\n          Safi-al- Din em Bagdá no ano de 1280, com as Guias usadas pelo povo\n          dos terreiros.\n        </p>\n        <p>\n          Do ponto de vista musical a guia é um ostinato, que se repete sem\n          variação, ao longo de uma peça musical. Ela atua como um dispositivo\n          estruturador da criação musical, dá o tempero da levada e atua também\n          como um cronômetro.\n        </p>\n        <p>\n          Nos terreiros, a palavra guia também tem várias funções, ela pode se\n          referir ao colar utilizado pelas pessoas que frequentam o terreiro,\n          como para as entidades que são chamadas de guias. Acredito que chamar\n          de guia os padrões rítmicos gerados pelo Polymatic, vai nos aproximar\n          do pensamento das culturas dos povos africanos e das diásporas e de\n          suas experiências coletivas de fazer música. Uma música que não se\n          separa da dança e da vida.\n        </p>\n        <p>\n          Esperamos que o Polymatic possa possibilitar que você reúna a família,\n          as/os amigos/as e se for professor as/os estudantes para juntos\n          fazerem música a partir do pensamento musical africano e da diáspora.\n        </p>\n        <p>Mas como isso acontece? Leia o nosso manual.</p>\n\n        <p>\n          <a\n            href={`${process.env.PUBLIC_URL}/manual.pdf`}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Baixar manual\n          </a>\n        </p>\n      </div>\n    </div>\n  );\n}\nexport default Header;\n","import React, { createContext, useReducer } from \"react\";\n\nconst initialState = {\n  // type: String\n  // This is the pattern shown by the preview\n  previewPattern: \"\",\n  previewVisibility: false,\n  // type: Map<String,Clave>\n  // This is the list of claves shown by the main screen\n  polymetric: false,\n  claves: [],\n  isPlaying: false\n};\n\nconst store = createContext(initialState);\n\nconst createReducer = () => {\n  return (state, action) => {\n    switch (action.type) {\n      case \"previewPattern.update\":\n        return {\n          ...state,\n          previewPattern: action.pattern\n        };\n      case \"preview.visibility\":\n        return {\n          ...state,\n          previewVisibility: action.visible\n        };\n      case \"claves.add\":\n        return { ...state, claves: [...state.claves, action.clave] };\n      case \"claves.remove\":\n        return {\n          ...state,\n          claves: state.claves.filter(clave => clave.id !== action.id)\n        };\n      case \"claves.removeAll\":\n        return {\n          ...state,\n          claves: [],\n          polymetric: false\n        };\n      case \"toggle.polymetric\":\n        return {\n          ...state,\n          polymetric: !state.polymetric\n        };\n      case \"start.all\":\n        return { ...state, isPlaying: true };\n      case \"stop.all\":\n        return { ...state, isPlaying: false };\n      default:\n        throw new Error(`Cêsásiessionibuspassnasavassi?`);\n    }\n  };\n};\n\nconst Provider = ({ children }) => {\n  const { Provider } = store;\n  const memoizedReducer = React.useCallback(createReducer(), []);\n  const [state, dispatch] = useReducer(memoizedReducer, initialState);\n  return <Provider value={{ state, dispatch }}>{children}</Provider>;\n};\n\nconst Consumer = store.Consumer;\n\nexport { store, Provider, Consumer };\n","import React, { useEffect, useRef, useState, useContext } from \"react\";\nimport RangeSlider from \"react-bootstrap-range-slider\";\nimport \"react-bootstrap-range-slider/dist/react-bootstrap-range-slider.css\";\nimport shortid from \"shortid\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPlay, faStop, faTrash } from \"@fortawesome/free-solid-svg-icons\";\nimport { Button, ButtonGroup } from \"react-bootstrap\";\nimport { store } from \"../store\";\n\nexport default function Layer({ clave }) {\n  const canvasRef = useRef();\n  const [volume, setVolume] = useState(100);\n  const { sequence, tempo, clavis, channel, instrument } = clave;\n  const { dispatch } = useContext(store);\n  const { state } = useContext(store);\n\n  useEffect(() => {\n    clavis.configure(canvasRef.current, sequence, tempo);\n    clavis.draw();\n    if (state.isPlaying) clave.start();\n  }, [clave, clavis, sequence, tempo]);\n\n  const handleStop = () => {\n    clave.stop();\n  };\n\n  const handleStart = () => {\n    clave.start();\n  };\n\n  const handleRemove = () => {\n    clave.remove();\n    dispatch({ type: \"claves.remove\", id: clave.id });\n  };\n\n  function remap(value, low1, high1, low2, high2) {\n    return low2 + ((high2 - low2) * (value - low1)) / (high1 - low1);\n  }\n\n  const handleVolume = value => {\n    const newVolume = remap(value, 0, 100, 0.0, 1.0);\n    setVolume(value);\n    channel.setVolume(newVolume);\n  };\n\n  return (\n    <div className=\"layer\">\n      <canvas\n        id={shortid.generate()}\n        ref={canvasRef}\n        width={640}\n        height={425}\n      />\n      <ul>\n        <li>sequence: {sequence}</li>\n        <li>tempo: {tempo}</li>\n        <li>instrumento: {instrument}</li>\n      </ul>\n\n      <div className=\"controls\">\n        <ButtonGroup aria-label=\"Basic example\">\n          <Button onClick={() => handleStart()}>\n            <FontAwesomeIcon icon={faPlay} />\n          </Button>\n          <Button onClick={() => handleStop()}>\n            <FontAwesomeIcon icon={faStop} />\n          </Button>\n          <Button onClick={() => handleRemove()}>\n            <FontAwesomeIcon icon={faTrash} />\n          </Button>\n        </ButtonGroup>\n      </div>\n\n      <div className=\"mt-2 volume\">\n        <span className=\"mr-2\">Vol.</span>\n        <RangeSlider\n          value={volume}\n          min={0}\n          max={100}\n          tooltipLabel={currentValue => `${currentValue}%`}\n          onChange={e => handleVolume(Number(e.target.value))}\n        />\n      </div>\n    </div>\n  );\n}\n","/**\nOriginal code from Lincoln de Sousa\nauthor: Lincoln de Sousa <lincoln@clarete.li>\nsource: https://github.com/clarete/clavis/\n**/\n\nclass Clavis {\n  constructor() {\n    this.canvas = null;\n    this.context = null;\n    this.pattern = null;\n    this.tempo = 0;\n    this.animate = false;\n    this.lastRender = Date.now();\n    this.draw = this.draw.bind(this);\n    this.currentStep = 1;\n    this.patternPos = {};\n  }\n\n  configure(canvas, pattern, tempo) {\n    this.canvas = canvas;\n    this.context = canvas.getContext(\"2d\");\n    this.pattern = pattern;\n    this.tempo = tempo;\n  }\n\n  setCurrentStep(step) {\n    this.currentStep = step;\n  }\n\n  play() {\n    this.animate = true;\n    window.requestAnimationFrame(this.draw);\n  }\n\n  pause() {\n    this.currentStep = 1;\n    this.animate = false;\n  }\n\n  draw() {\n    const { canvas, context, pattern } = this;\n    const theme = {\n      \"canvas-padding\": \"20px\",\n      \"canvas-width\": 200,\n      \"canvas-height\": 200,\n      \"outer-circle-radius\": 80,\n      \"outer-circle-line-width\": 2,\n      \"outer-circle-stroke-style\": \"#fff\",\n      \"dot-path-stroke\": \"#cc2c11\",\n      \"dot-on-radius\": 4,\n      \"dot-on-stroke-style\": \"#cc2c11\",\n      \"dot-on-fill-style\": \"#cc2c11\",\n      \"dot-off-radius\": 2,\n      \"dot-off-stroke-style\": \"#fff\",\n      \"dot-off-fill-style\": \"#fff\",\n      \"dot-beat-radius\": 8,\n      \"dot-beat-stroke-style\": \"#cc2c11\",\n      \"dot-beat-fill-style\": \"#cc2c11\"\n    };\n\n    /* Canvas dimensions */\n    const [width, height] = [theme[\"canvas-width\"], theme[\"canvas-height\"]];\n\n    /* Radius of the outer circle */\n    const radius = theme[\"outer-circle-radius\"];\n\n    /* The entire circle is `360∘ ≡ 2π` and we we want to find the\n       distance between each point `2π / N`. */\n    const angle = (2 * Math.PI) / pattern.length;\n\n    /* This is where it all starts */\n    const startAngle = -0.5 * Math.PI;\n\n    /* Configure canvas */\n    canvas.style.padding = theme[\"canvas-padding\"];\n    canvas.width = width;\n    canvas.height = height;\n\n    function drawOuterCircle() {\n      context.lineWidth = theme[\"outer-circle-line-width\"];\n      context.strokeStyle = theme[\"outer-circle-stroke-style\"];\n      context.beginPath();\n      context.arc(\n        width / 2 /* x */,\n        height / 2 /* y */,\n        radius /* radius */,\n        0 /* angle start */,\n        2 * Math.PI /* angle end */\n      );\n      context.stroke();\n    }\n\n    // function drawStep(x, y, step) {\n    //   context.font = \"12px serif\";\n    //   context.fillText(step, x, y);\n    // }\n\n    function drawDot(x, y, { radius, stroke, fill }) {\n      context.strokeStyle = stroke;\n      context.fillStyle = fill;\n      context.beginPath();\n      context.arc(x, y, radius, 0, 2 * Math.PI);\n      context.fill();\n      context.stroke();\n    }\n\n    function drawDotOn(x, y) {\n      drawDot(x, y, {\n        radius: theme[\"dot-on-radius\"],\n        stroke: theme[\"dot-on-stroke-style\"],\n        fill: theme[\"dot-on-fill-style\"]\n      });\n    }\n\n    function drawDotOff(x, y) {\n      drawDot(x, y, {\n        radius: theme[\"dot-off-radius\"],\n        stroke: theme[\"dot-off-stroke-style\"],\n        fill: theme[\"dot-off-fill-style\"]\n      });\n    }\n\n    function drawDotBeat(x, y) {\n      drawDot(x, y, {\n        radius: theme[\"dot-beat-radius\"],\n        stroke: theme[\"dot-beat-stroke-style\"],\n        fill: theme[\"dot-beat-fill-style\"]\n      });\n    }\n\n    context.clearRect(0, 0, width, height);\n    drawOuterCircle();\n\n    const patternDots = [];\n\n    function connectDots(dots) {\n      context.strokeStyle = theme[\"dot-path-stroke\"];\n      context.beginPath();\n      context.moveTo(dots[0][0], dots[0][1]);\n      for (let i = 1; i < dots.length; i++) {\n        context.lineTo(dots[i][0], dots[i][1]);\n      }\n      context.closePath();\n      context.stroke();\n    }\n\n    function coords(angle, r) {\n      /* Find the equidistant points:\n         Many thanks to\n         https://math.stackexchange.com/questions/2820194/how-to-plot-n-coords-to-distribute-evenly-as-a-ring-of-points-around-a-circle\n      */\n      const x = Math.cos(angle) * r + width / 2;\n      const y = Math.sin(angle) * r + height / 2;\n      return [x, y];\n    }\n\n    for (let i = 0; i < pattern.length; i++) {\n      const a = startAngle + angle * i;\n      const [x, y] = coords(a, radius);\n      if (pattern[i] === \"1\") {\n        drawDotOn(x, y);\n        patternDots.push([x, y]);\n      } else {\n        drawDotOff(x, y);\n      }\n      //const [xStep, yStep] = coords(a, 100);\n      //drawStep(xStep, yStep, i + 1);\n      this.patternPos[i] = { x, y };\n    }\n\n    /* Connect the dots */\n    if (patternDots.length >= 1) {\n      connectDots(patternDots);\n    }\n\n    /* Draw the moving dot */\n    const beatX = this.patternPos[this.currentStep - 1].x;\n    const beatY = this.patternPos[this.currentStep - 1].y;\n    drawDotBeat(beatX, beatY);\n    if (this.animate) {\n      window.requestAnimationFrame(this.draw);\n    }\n  }\n}\n\nexport default Clavis;\n","import React, { useEffect, useRef, useContext } from \"react\";\nimport shortid from \"shortid\";\nimport Clavis from \"../lib/clavis\";\nimport { store } from \"../store\";\n\nexport default function Preview() {\n  const clavis = new Clavis();\n  const canvasRef = useRef();\n  const { state } = useContext(store);\n\n  useEffect(() => {\n    if (canvasRef.current) {\n      clavis.configure(canvasRef.current, state.previewPattern, 120);\n      clavis.draw();\n    }\n  }, [state.previewPattern, clavis]);\n\n  if (!state.previewPattern || state.previewPattern.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"layer\">\n      <canvas\n        id={shortid.generate()}\n        ref={canvasRef}\n        width={640}\n        height={425}\n      />\n      <p className=\"Preview\">Pré-visualização</p>\n    </div>\n  );\n}\n","import agogo1 from \"./samples/agogo1.wav\";\nimport agogo2 from \"./samples/agogo2.wav\";\nimport bass from \"./samples/bass.wav\";\nimport block from \"./samples/block.wav\";\nimport bumbo from \"./samples/bum.wav\";\nimport claves from \"./samples/claves.wav\";\nimport conga1 from \"./samples/conga1.wav\";\nimport conga2 from \"./samples/conga2.wav\";\nimport cymbal from \"./samples/cymbal.wav\";\nimport djembe1 from \"./samples/djembe1.wav\";\nimport djembe2 from \"./samples/djembe3.wav\";\nimport djembe3 from \"./samples/djembe2.wav\";\nimport hit from \"./samples/hit.wav\";\nimport hithat from \"./samples/hithat.wav\";\nimport kick1 from \"./samples/kick1.wav\";\nimport kick2 from \"./samples/kick2.wav\";\nimport kicklow from \"./samples/kicklow.wav\";\nimport snare from \"./samples/snare.wav\";\nimport tamborim from \"./samples/tamborim.wav\";\n\nconst instruments = {\n  agogo1,\n  agogo2,\n  bass,\n  block,\n  bumbo,\n  claves,\n  conga1,\n  conga2,\n  cymbal,\n  djembe1,\n  djembe2,\n  djembe3,\n  hit,\n  hithat,\n  kick1,\n  kick2,\n  kicklow,\n  snare,\n  tamborim\n};\n\nexport default instruments;\n","import shortid from \"shortid\";\n\nconst presets = {\n  [shortid.generate()]: {\n    name: \"Toque Ignbin\",\n    instruments: [{ sequence: \"101101011010\", tempo: 120, sample: \"conga1\" }]\n  },\n  [shortid.generate()]: {\n    name: \"Son cubano\",\n    instruments: [\n      {\n        sequence: \"1001001000101000\",\n        tempo: 92,\n        sample: \"claves\"\n      }\n    ]\n  },\n  [shortid.generate()]: {\n    name: \"Rumba\",\n    instruments: [\n      { sequence: \"1001000100101000\", tempo: 110, sample: \"claves\" }\n    ]\n  },\n  [shortid.generate()]: {\n    name: \"Samba\",\n    instruments: [\n      { sequence: \"1011010101101010\", tempo: 60, sample: \"tamborim\" }\n    ]\n  }\n};\n\nexport default presets;\n","/**\n Original code\n Author: Ehsan Ziya <ehsan.ziya@gmail.com>\n source: https:github.com/zya/beet.js\n**/\n\nimport er from \"euclidean-rhythms\";\nimport WatchJS from \"melanke-watchjs\";\n\nconst watch = WatchJS.watch;\n\nfunction Pattern(pulses, steps) {\n  var self = this;\n\n  self._createSequence(pulses, steps);\n\n  watch(this, [\"pulses\", \"steps\"], function() {\n    self.update(this.pulses, this.steps);\n  });\n\n  return this;\n}\n\nPattern.prototype.update = function(pulses, steps) {\n  var self = this;\n  self._createSequence(pulses, steps);\n\n  return this;\n};\n\nPattern.prototype.shift = function(offset) {\n  var off =\n    offset > this.seq.length ? (offset = offset - this.seq.length) : offset;\n  if (off === this.seq.length) return this;\n\n  var tail = this.seq.splice(this.seq.length - off, off);\n\n  for (var i = 0; i < tail.length; i++) {\n    this.seq.unshift(tail[i]);\n  }\n  return this;\n};\n\nPattern.prototype._createSequence = function(pulses, steps) {\n  var self = this;\n  var typeOfPulses = typeof pulses;\n\n  if (typeOfPulses === \"number\") {\n    self.pulses = pulses;\n    self.steps = steps || pulses;\n    self.seq = er.getPattern(self.pulses, self.steps);\n  } else if (typeOfPulses === \"string\") {\n    self.steps = pulses.length;\n    self.seq = pulses.split(\"\");\n  }\n\n  return this;\n};\n\nexport default Pattern;\n","/**\n Original code\n Author: Ehsan Ziya <ehsan.ziya@gmail.com>\n source: https:github.com/zya/beet.js\n**/\n\nimport work from \"webworkify-webpack\";\n\nfunction Metro(context, callback) {\n  var self = this;\n\n  if (!context) throw new Error(\"Context is mandatory\");\n  if (!callback) throw new Error(\"Callback is mandatory\");\n\n  this.context = context;\n  this.steps = 16;\n  this.tempo = 120;\n  this.callback = callback;\n  this.look_ahead = 1.0;\n\n  this._step = 1;\n  this._scheduler_interval = 20;\n  this._next_event_time = 0.0;\n  this._first = true;\n  this._is_running = false;\n\n  this._worker = work(require.resolve(\"./worker.js\"));\n\n  this._worker.onmessage = function(event) {\n    if (event.data === \"tick\" && self._is_running) {\n      self._scheduler();\n    }\n  };\n\n  this._worker.postMessage({\n    interval: self._scheduler_interval\n  });\n}\n\nMetro.prototype.start = function(callback) {\n  if (this._is_running) {\n    console.log(\"already started\");\n    return;\n  }\n  this._is_running = true;\n  this._worker.postMessage(\"start\");\n};\n\nMetro.prototype.pause = function() {\n  this._is_running = false;\n  this._worker.postMessage(\"stop\");\n};\n\nMetro.prototype.stop = function() {\n  this._first = true;\n  this._step = 1;\n  this._is_running = false;\n  this._worker.postMessage(\"stop\");\n};\n\nMetro.prototype._scheduler = function _scheduler() {\n  var self = this;\n  if (this._step === 1 && this._first) {\n    this._next_event_time = this.context.currentTime;\n  }\n  while (this._next_event_time < this.context.currentTime + this.look_ahead) {\n    var event_time_from_scheduled =\n      self._next_event_time - self.context.currentTime;\n    this.callback(self._next_event_time, self._step, event_time_from_scheduled);\n    this._next();\n  }\n};\n\nMetro.prototype._next = function _next() {\n  this._step++;\n  if (this._first) {\n    this._next_event_time = this.context.currentTime;\n    this._first = false;\n  }\n  if (this._step > this.steps) {\n    this._step = 1;\n  }\n  this._next_event_time += ((60.0 / this.tempo) * 4) / this.steps;\n};\n\nexport default Metro;\n","/**\n Original code\n Author: Ehsan Ziya <ehsan.ziya@gmail.com>\n source: https:github.com/zya/beet.js\n**/\n\nimport Metro from \"./wa-metro.js\";\n\nclass Layer {\n  constructor(id, context, tempo, clavis, sequence, on) {\n    this.id = id;\n    this.on = on;\n    this.tempo = tempo;\n    this.clavis = clavis;\n    this.context = context;\n    this.sequence = sequence;\n    this.metro = new Metro(context, (time, step, timeFromScheduled) => {\n      if (this.metro.steps !== this.sequence.seq.length) {\n        this.metro.steps = this.sequence.seq.length;\n      }\n\n      if (sequence.seq[step - 1] === \"1\") {\n        this.on(time, step, timeFromScheduled);\n        setTimeout(() => {\n          clavis.setCurrentStep(step);\n        }, 1000);\n      } else {\n        setTimeout(() => {\n          clavis.setCurrentStep(step);\n        }, 1000);\n      }\n    });\n    this.metro.steps = sequence.seq.length;\n    this.metro.tempo = this.tempo;\n  }\n\n  start() {\n    this.metro.start();\n  }\n\n  pause() {\n    this.metro.pause();\n  }\n\n  stop() {\n    this.metro.stop();\n  }\n\n  watch(value) {\n    this.metro.tempo = value;\n  }\n}\n\nexport default Layer;\n","/**\n Original code\n Author: Ehsan Ziya <ehsan.ziya@gmail.com>\n source: https:github.com/zya/beet.js\n**/\n\nimport shortid from \"shortid\";\nimport Pattern from \"./pattern\";\nimport Layer from \"./layer\";\n\nclass Beet {\n  constructor({ context }) {\n    this.context = context;\n    this.tempo = 120;\n    this.layers = [];\n  }\n\n  layer(sequence, tempo, clavis, on) {\n    return new Layer(\n      shortid.generate(),\n      this.context,\n      tempo,\n      clavis,\n      sequence,\n      on\n    );\n  }\n\n  pattern(pulses, steps) {\n    return new Pattern(pulses, steps);\n  }\n\n  add(layer) {\n    this.layers.push(layer);\n  }\n\n  remove(layer) {\n    layer.metro.stop();\n    this.layers = this.layers.filter(item => item.id !== layer.id);\n  }\n\n  start() {\n    this.layers.forEach(layer => {\n      layer.start();\n    });\n  }\n\n  stop() {\n    this.layers.forEach(layer => {\n      layer.stop();\n    });\n  }\n\n  pause() {\n    this.layers.forEach(layer => {\n      layer.pause();\n    });\n  }\n\n  load(context, path, success, failure) {\n    var request = new XMLHttpRequest();\n    request.open(\"GET\", path, true);\n    request.responseType = \"arraybuffer\";\n    request.onload = function() {\n      context.decodeAudioData(request.response, success, failure);\n    };\n    request.onerror = failure;\n    request.send();\n  }\n\n  changeTempo(value) {\n    for (const layer of this.layers) {\n      layer.metro.tempo = value;\n    }\n  }\n}\n\nexport default Beet;\n","class Channel {\n  constructor() {\n    this.volume = 1.0;\n    this.context = null;\n    this.beet = null;\n    this.instrument = null;\n  }\n\n  configure(context, beet, instrument) {\n    this.context = context;\n    this.beet = beet;\n    this.instrument = instrument;\n  }\n\n  setVolume(volume) {\n    this.volume = volume;\n  }\n\n  getVolume() {\n    return this.volume;\n  }\n\n  callbackOn = (time, step) => {\n    const gainNode = this.context.createGain();\n    gainNode.gain.value = this.volume;\n    gainNode.connect(this.context.destination);\n\n    const source = this.context.createBufferSource();\n    source.buffer = this.instrument;\n    source.connect(gainNode);\n    source.start(time);\n  };\n}\n\nexport default Channel;\n","import Beet from \"./beet\";\nimport Clavis from \"./clavis\";\nimport Channel from \"./channel\";\nimport shortid from \"shortid\";\n\nclass Clave {\n  constructor(context, baseTempo, sequence, tempo, instrument, polymetric) {\n    this.id = shortid.generate();\n    this.beet = new Beet({ context });\n    this.sequence = sequence;\n    this.clavis = new Clavis();\n    this.channel = new Channel();\n    this.tempo = tempo;\n    this.instrument = instrument.name;\n    this.sample = instrument.sample;\n    this.channel.configure(context, this.beet, this.sample);\n    this.beetLayer = null;\n    this.polymetric = polymetric;\n\n    if (this.polymetric) {\n      let firstSteps = baseTempo.length;\n\n      let newSteps = this.sequence.length;\n      if (newSteps !== firstSteps) {\n        if (firstSteps > newSteps) {\n          let ratio = firstSteps / newSteps;\n          this.tempo = (this.tempo * ratio).toFixed(2);\n        } else {\n          let ratio = newSteps / firstSteps;\n          this.tempo = (this.tempo / ratio).toFixed(2);\n        }\n      }\n    }\n\n    const layer = this.beet.layer(\n      this.beet.pattern(this.sequence),\n      this.tempo,\n      this.clavis,\n      this.channel.callbackOn\n    );\n    this.beet.add(layer);\n    this.beetLayer = layer;\n  }\n\n  remove() {\n    this.beet.remove(this.beetLayer);\n    this.clavis.pause();\n  }\n\n  start() {\n    this.beet.start();\n    this.clavis.play();\n  }\n\n  pause() {\n    this.beet.pause();\n    this.clavis.pause();\n  }\n\n  stop() {\n    this.beet.stop();\n    this.clavis.pause();\n  }\n}\n\nexport default Clave;\n","import React from \"react\";\nimport { Button, Modal } from \"react-bootstrap\";\n\nexport default function AlertModal(props) {\n  return (\n    <Modal\n      {...props}\n      size=\"lg\"\n      aria-labelledby=\"contained-modal-title-vcenter\"\n      centered\n    >\n      <Modal.Header closeButton>\n        <Modal.Title id=\"contained-modal-title-vcenter\">\n          Remover todas as guias?\n        </Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <h4>Atenção!</h4>\n        <p>Você confirma que deseja apagar todas as guias?</p>\n      </Modal.Body>\n      <Modal.Footer>\n        <Button variant=\"secondary\" onClick={props.onHide}>\n          Fechar\n        </Button>\n        <Button onClick={props.onConfirm}>Remover</Button>\n      </Modal.Footer>\n    </Modal>\n  );\n}\n","import React, { useState, useContext, useRef } from \"react\";\nimport shortid from \"shortid\";\nimport er from \"euclidean-rhythms\";\nimport instrumentsList from \"../instruments\";\nimport presets from \"../presets\";\nimport Clave from \"../lib/clave\";\nimport AlertModal from \"./AlertModal\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPlay, faStop, faTimes } from \"@fortawesome/free-solid-svg-icons\";\nimport {\n  Button,\n  ButtonGroup,\n  FormControl,\n  InputGroup,\n  Form,\n  Dropdown\n} from \"react-bootstrap\";\n\nimport { store } from \"../store\";\n\nfunction Toolbar({ context, instruments }) {\n  const [patternError, setPatternError] = useState(false);\n  const [sample, setSample] = useState(\"agogo1\");\n  const [tempo, setTempo] = useState(120);\n  const { dispatch } = useContext(store);\n  const { state } = useContext(store);\n  const [modalShow, setModalShow] = useState(false);\n  const hasClaves = state.claves.length > 0 ? true : false;\n  const patternInput = useRef(null);\n  let baseTempo = \"\";\n\n  if (state.claves.length > 0) {\n    baseTempo = state.claves[0].sequence;\n  }\n\n  const handleNewClave = () => {\n    const clave = new Clave(\n      context,\n      baseTempo,\n      state.previewPattern,\n      tempo,\n      { name: sample, sample: instruments[sample] },\n      state.polymetric\n    );\n    dispatch({ type: \"claves.add\", id: shortid.generate(), clave });\n    dispatch({ type: \"previewPattern.update\", pattern: state.previewPattern });\n    dispatch({ type: \"preview.visibility\", visible: false });\n    dispatch({ type: \"start.all\" });\n  };\n\n  const handlePreset = value => {\n    presets[value].instruments.forEach(preset => {\n      const { sequence, tempo, sample } = preset;\n      const clave = new Clave(context, baseTempo, sequence, tempo, {\n        name: sample,\n        sample: instruments[sample]\n      });\n      dispatch({ type: \"claves.add\", id: shortid.generate(), clave });\n    });\n    dispatch({ type: \"start.all\" });\n  };\n\n  const handlePattern = value => {\n    const isEuclidian = new RegExp(\"^(\\\\d+),(\\\\d+)$\");\n    const isBinary = new RegExp(\"^[0-1]{1,}$\");\n    if (isEuclidian.test(value)) {\n      const [pulse, steps] = value\n        .split(\",\")\n        .map(number => parseInt(number))\n        .sort((a, b) => a - b);\n      const newPattern = er.getPattern(pulse, steps).join(\"\");\n      dispatch({ type: \"previewPattern.update\", pattern: newPattern });\n      setPatternError(false);\n    } else if (isBinary.test(value)) {\n      dispatch({ type: \"previewPattern.update\", pattern: value });\n      setPatternError(false);\n    } else {\n      setPatternError(true);\n    }\n    if (value === \"\") {\n      dispatch({ type: \"previewPattern.update\", pattern: value });\n      setPatternError(false);\n    }\n    dispatch({ type: \"preview.visibility\", visible: true });\n  };\n\n  const start = () => {\n    for (const clave of state.claves) {\n      clave.start();\n    }\n  };\n\n  const stop = () => {\n    for (const clave of state.claves) {\n      clave.stop();\n    }\n    dispatch({ type: \"stop.all\", isPlaying: true });\n  };\n\n  const removeAll = () => {\n    stop();\n    dispatch({ type: \"claves.removeAll\" });\n    setModalShow(false);\n  };\n\n  return (\n    <div className=\"toolbar\">\n      <AlertModal\n        show={modalShow}\n        onHide={() => setModalShow(false)}\n        onConfirm={() => removeAll()}\n      />\n      <div className=\"toolbar-controls\">\n        <ButtonGroup aria-label=\"Basic example\">\n          <Button onClick={() => start()}>\n            <FontAwesomeIcon icon={faPlay} />\n          </Button>\n          <Button onClick={() => stop()}>\n            <FontAwesomeIcon icon={faStop} />\n          </Button>\n          <Button onClick={() => setModalShow(true)} disabled={!hasClaves}>\n            <FontAwesomeIcon icon={faTimes} />\n          </Button>\n        </ButtonGroup>\n      </div>\n      <div className=\"toolbar-form\">\n        <InputGroup>\n          <InputGroup.Prepend>\n            <InputGroup.Text id=\"basic-addon3\">Padrão</InputGroup.Text>\n          </InputGroup.Prepend>\n          <FormControl\n            placeholder=\"1010101 ou 3,4\"\n            ref={patternInput}\n            onChange={e => handlePattern(e.target.value)}\n            isInvalid={patternError}\n          />\n        </InputGroup>\n        <InputGroup>\n          <InputGroup.Prepend>\n            <InputGroup.Text id=\"basic-addon3\">Tempo</InputGroup.Text>\n          </InputGroup.Prepend>\n          <FormControl\n            placeholder=\"tempo\"\n            value={tempo}\n            onChange={e => setTempo(e.target.value)}\n          />\n        </InputGroup>\n        <Form.Control as=\"select\" onChange={e => setSample(e.target.value)}>\n          <option>Instrumentos</option>\n          {Object.keys(instrumentsList).map((instrument, index) => (\n            <option key={index} value={instrument}>\n              {instrument}\n            </option>\n          ))}\n        </Form.Control>\n\n        <Form.Check\n          inline\n          className=\"ml-2 polymetric\"\n          type=\"checkbox\"\n          label=\"Polimetria\"\n          checked={state.polymetric}\n          onChange={() => dispatch({ type: \"toggle.polymetric\" })}\n          disabled={!hasClaves}\n        />\n\n        <Button\n          className=\"ml-2\"\n          onClick={() => handleNewClave()}\n          disabled={patternError || state.previewPattern.length === 0}\n        >\n          Adicionar\n        </Button>\n\n        <Dropdown className=\"ml-2\">\n          <Dropdown.Toggle variant=\"info\" id=\"dropdown-basic\">\n            presets\n          </Dropdown.Toggle>\n          <Dropdown.Menu>\n            {Object.keys(presets).map((preset, index) => (\n              <Dropdown.Item key={index} onClick={() => handlePreset(preset)}>\n                {presets[preset].name}\n              </Dropdown.Item>\n            ))}\n          </Dropdown.Menu>\n        </Dropdown>\n      </div>\n    </div>\n  );\n}\nexport default Toolbar;\n","import React from \"react\";\nimport Layer from \"../components/Layer\";\nimport Preview from \"../components/Preview\";\nimport Toolbar from \"../components/Toolbar\";\nimport { store } from \"../store\";\n\nfunction Home({ context, instruments }) {\n  const { state } = React.useContext(store);\n\n  return (\n    <div className=\"App\">\n      <Toolbar context={context} instruments={instruments} />\n      <div className=\"wrapper\">\n        {state.claves.map(clave => (\n          <Layer key={clave.id} clave={clave} />\n        ))}\n        {state.previewVisibility && <Preview />}\n      </div>\n    </div>\n  );\n}\n\nexport default Home;\n","import React from \"react\";\nimport packageJson from \"../../package.json\";\nimport { Link } from \"react-router-dom\";\nimport { Navbar, Nav } from \"react-bootstrap\";\n\nfunction Header() {\n  return (\n    <Navbar collapseOnSelect bg=\"black\" expand=\"lg\" variant=\"black\">\n      <Navbar.Brand>\n        <h3>\n          <Link to=\"/\">\n            Polymatic <small>{packageJson.version}</small>\n          </Link>\n        </h3>\n      </Navbar.Brand>\n      <Nav className=\"mr-auto\">\n        <Nav>\n          <Link to=\"/sobre\">sobre</Link>\n        </Nav>\n      </Nav>\n    </Navbar>\n  );\n}\nexport default Header;\n","/**\nOriginal code from Boris Simus\nsource: https://www.html5rocks.com/en/tutorials/webaudio/intro/\n**/\n\nclass BufferLoader {\n  constructor(context, instruments, callback) {\n    this.context = context;\n    this.instruments = instruments;\n    this.onload = callback;\n    this.bufferList = {};\n    this.loadCount = 0;\n  }\n\n  loadBuffer(instrument, index) {\n    // Load buffer asynchronously\n    const request = new XMLHttpRequest();\n    request.open(\"GET\", this.instruments[instrument], true);\n    request.responseType = \"arraybuffer\";\n\n    request.onload = () => {\n      // Asynchronously decode the audio file data in request.response\n      this.context.decodeAudioData(\n        request.response,\n        buffer => {\n          if (!buffer) {\n            alert(\"error decoding file data: \" + instrument);\n            return;\n          }\n          this.bufferList[instrument] = buffer;\n          if (++this.loadCount === Object.keys(this.instruments).length)\n            this.onload(this.bufferList);\n        },\n        error => {\n          console.error(\"decodeAudioData error\", error);\n        }\n      );\n    };\n\n    request.onerror = () => {\n      alert(\"BufferLoader: XHR error\");\n    };\n\n    request.send();\n  }\n\n  load() {\n    Object.keys(this.instruments).forEach(instrument => {\n      this.loadBuffer(instrument);\n    });\n  }\n}\n\nexport default BufferLoader;\n","import React, { useState, useEffect } from \"react\";\nimport { HashRouter, Route } from \"react-router-dom\";\nimport ReactGA from \"react-ga\";\nimport About from \"./pages/About\";\nimport Home from \"./pages/Home\";\nimport Header from \"./components/Header\";\nimport BufferLoader from \"./lib/bufferLoader\";\nimport instruments from \"./instruments\";\nimport \"./custom.scss\";\nimport \"./App.sass\";\n\nconst context = new (window.AudioContext || window.webkitAudioContext)();\n\nfunction App() {\n  const [loadedSamples, setLoadedSamples] = useState();\n  const trackingId = \"UA-160360260-2\";\n  ReactGA.initialize(trackingId);\n  ReactGA.pageview(window.location.pathname + window.location.search);\n\n  const finishedLoading = bufferList => setLoadedSamples(bufferList);\n\n  useEffect(() => {\n    let bufferLoader = new BufferLoader(context, instruments, finishedLoading);\n\n    bufferLoader.load();\n  }, []);\n\n  return (\n    <HashRouter basename=\"/\">\n      <Header />\n\n      <Route exact path=\"/sobre\">\n        <About />\n      </Route>\n      <Route\n        exact\n        path=\"/\"\n        render={routeProps => (\n          <Home {...routeProps} instruments={loadedSamples} context={context} />\n        )}\n      />\n    </HashRouter>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport { Provider } from './store';\n\nReactDOM.render(\n    <Provider><App /></Provider>,\n    document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/agogo1.b8f6e210.wav\";","module.exports = __webpack_public_path__ + \"static/media/agogo2.5844966c.wav\";","module.exports = __webpack_public_path__ + \"static/media/bass.b2419d4f.wav\";","module.exports = __webpack_public_path__ + \"static/media/block.3753c44b.wav\";","module.exports = __webpack_public_path__ + \"static/media/bum.4c11d5fa.wav\";","module.exports = __webpack_public_path__ + \"static/media/claves.400c9ef3.wav\";","module.exports = __webpack_public_path__ + \"static/media/conga1.41b2f57f.wav\";","module.exports = __webpack_public_path__ + \"static/media/conga2.887c0c16.wav\";","module.exports = __webpack_public_path__ + \"static/media/cymbal.950d832b.wav\";","module.exports = __webpack_public_path__ + \"static/media/djembe1.f3e648cb.wav\";","module.exports = __webpack_public_path__ + \"static/media/djembe3.acef368f.wav\";","module.exports = __webpack_public_path__ + \"static/media/djembe2.d38ab3d2.wav\";","module.exports = __webpack_public_path__ + \"static/media/hit.a315148b.wav\";","module.exports = __webpack_public_path__ + \"static/media/hithat.950d832b.wav\";","module.exports = __webpack_public_path__ + \"static/media/kick1.e63d68a9.wav\";","module.exports = __webpack_public_path__ + \"static/media/kick2.18445a5e.wav\";","module.exports = __webpack_public_path__ + \"static/media/kicklow.c09eab14.wav\";","module.exports = __webpack_public_path__ + \"static/media/snare.96dbe59f.wav\";","module.exports = __webpack_public_path__ + \"static/media/tamborim.a6cbfb58.wav\";"],"sourceRoot":""}